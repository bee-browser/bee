// DO NOT EDIT THIS FILE BY HAND.
//
// This file was automagically generated with:
// template: {{ template }}

#pragma once

#include <cstdlib>

#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wunused-parameter"
#include <llvm/IR/IRBuilder.h>
#include <llvm/IR/LLVMContext.h>
#include <llvm/IR/Module.h>
#pragma GCC diagnostic pop

class TypeHolder {
 public:
  TypeHolder(llvm::LLVMContext& context, llvm::Module& module, llvm::IRBuilder<>& builder)
      : context_(context), module_(module), builder_(builder) {}

  void EnableLabels() {
    enable_labels_ = true;
  }

  llvm::Type* GetWordType();
  llvm::Value* GetWord(size_t value);
  llvm::StructType* CreateValueType();
  llvm::StructType* CreateChar16SeqType();
  llvm::StructType* CreateCaptureType();
  llvm::StructType* CreateClosureType();
  llvm::StructType* CreateCoroutineType();
  llvm::FunctionType* CreateLambdaType();
  {%- for function in data.functions %}
  llvm::Function* CreateRuntime{{ function.name | pascalCase }}();
  {%- endfor %}

 private:
  llvm::LLVMContext& context_;
  llvm::Module& module_;
  llvm::IRBuilder<>& builder_;
  llvm::StructType* value_type_ = nullptr;
  llvm::StructType* property_key_type_ = nullptr;
  llvm::StructType* char16_seq_type_ = nullptr;
  llvm::StructType* capture_type_ = nullptr;
  llvm::StructType* closure_type_ = nullptr;
  llvm::StructType* coroutine_type_ = nullptr;
  llvm::FunctionType* lambda_type_ = nullptr;
  {%- for function in data.functions %}
  llvm::Function* runtime_{{ function.name }}_ = nullptr;
  {%- endfor %}

  bool enable_labels_ = false;
};
