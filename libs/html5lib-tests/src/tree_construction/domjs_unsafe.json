{
  "name": "domjs_unsafe.json",
  "tests": [
    {
      "data": "<svg><![CDATA[foo\nbar]]>",
      "errors": [
        "(1,5): expected-doctype-but-got-start-tag",
        "(2,6): expected-closing-tag-but-got-eof"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<svg svg>"
        ],
        [
          3,
          "\"foo\nbar\""
        ]
      ]
    },
    {
      "data": "<svg><![CDATA[foo\rbar]]>",
      "errors": [
        "(1,5): expected-doctype-but-got-start-tag",
        "(2,6): expected-closing-tag-but-got-eof"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<svg svg>"
        ],
        [
          3,
          "\"foo\nbar\""
        ]
      ]
    },
    {
      "data": "<svg><![CDATA[foo\r\nbar]]>",
      "errors": [
        "(1,5): expected-doctype-but-got-start-tag",
        "(2,6): expected-closing-tag-but-got-eof"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<svg svg>"
        ],
        [
          3,
          "\"foo\nbar\""
        ]
      ]
    },
    {
      "data": "<script>a='\u0000'</script>",
      "errors": [
        "(1,8): expected-doctype-but-got-start-tag",
        "(1,12): invalid-codepoint"
      ],
      "newErrors": [
        "(1:12) unexpected-null-character"
      ],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "\"a='�'\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--\u0000</script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag",
        "(1,25): invalid-codepoint"
      ],
      "newErrors": [
        "(1:25) unexpected-null-character"
      ],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--�\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--foo\u0000</script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag",
        "(1,28): invalid-codepoint"
      ],
      "newErrors": [
        "(1:28) unexpected-null-character"
      ],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--foo�\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!-- foo-\u0000</script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag",
        "(1,30): invalid-codepoint"
      ],
      "newErrors": [
        "(1:30) unexpected-null-character"
      ],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!-- foo-�\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!-- foo--\u0000</script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag",
        "(1,31): invalid-codepoint"
      ],
      "newErrors": [
        "(1:31) unexpected-null-character"
      ],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!-- foo--�\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!-- foo-",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag",
        "(1,29): expected-script-data-but-got-eof",
        "(1,29): expected-named-closing-tag-but-got-eof"
      ],
      "newErrors": [
        "(1:30) eof-in-script-html-comment-like-text"
      ],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!-- foo-\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!-- foo-<</script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!-- foo-<\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!-- foo-<S",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag",
        "(1,31): expected-script-data-but-got-eof",
        "(1,31): expected-named-closing-tag-but-got-eof"
      ],
      "newErrors": [
        "(1:32) eof-in-script-html-comment-like-text"
      ],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!-- foo-<S\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!-- foo-</SCRIPT>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!-- foo-\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--<p></script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--<p>\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--<script></script></script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--<script></script>\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--<script>\u0000</script></script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag",
        "(1,33): invalid-codepoint"
      ],
      "newErrors": [
        "(1:33) unexpected-null-character"
      ],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--<script>�</script>\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--<script>-\u0000</script></script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag",
        "(1,34): invalid-codepoint"
      ],
      "newErrors": [
        "(1:34) unexpected-null-character"
      ],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--<script>-�</script>\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--<script>--\u0000</script></script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag",
        "(1,35): invalid-codepoint"
      ],
      "newErrors": [
        "(1:35) unexpected-null-character"
      ],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--<script>--�</script>\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--<script>---</script></script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--<script>---</script>\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--<script></scrip></SCRIPT></script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--<script></scrip></SCRIPT>\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--<script></scrip </SCRIPT></script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--<script></scrip </SCRIPT>\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--<script></scrip/</SCRIPT></script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--<script></scrip/</SCRIPT>\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"></scrip/></script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"</scrip/>\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"></scrip ></script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"</scrip >\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--</scrip></script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--</scrip>\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--</scrip </script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--</scrip \""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<script type=\"data\"><!--</scrip/</script>",
      "errors": [
        "(1,20): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          2,
          "<script>"
        ],
        [
          3,
          "type=\"data\""
        ],
        [
          3,
          "\"<!--</scrip/\""
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<!DOCTYPE html><!DOCTYPE html>",
      "errors": [
        "(1,30): unexpected-doctype"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<!DOCTYPE html>"
        ],
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<html><!DOCTYPE html>",
      "errors": [
        "(1,6): expected-doctype-but-got-start-tag",
        "(1,21): unexpected-doctype"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<html><head><!DOCTYPE html></head>",
      "errors": [
        "(1,6): expected-doctype-but-got-start-tag",
        "(1,27): unexpected-doctype"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<html><head></head><!DOCTYPE html>",
      "errors": [
        "(1,6): expected-doctype-but-got-start-tag",
        "(1,34): unexpected-doctype"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<body></body><!DOCTYPE html>",
      "errors": [
        "(1,6): expected-doctype-but-got-start-tag",
        "(1,28): unexpected-doctype"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<table><!DOCTYPE html></table>",
      "errors": [
        "(1,7): expected-doctype-but-got-start-tag",
        "(1,22): unexpected-doctype"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<table>"
        ]
      ]
    },
    {
      "data": "<select><!DOCTYPE html></select>",
      "errors": [
        "(1,8): expected-doctype-but-got-start-tag",
        "(1,23): unexpected-doctype"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<select>"
        ]
      ]
    },
    {
      "data": "<table><colgroup><!DOCTYPE html></colgroup></table>",
      "errors": [
        "(1,7): expected-doctype-but-got-start-tag",
        "(1,32): unexpected-doctype"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<table>"
        ],
        [
          3,
          "<colgroup>"
        ]
      ]
    },
    {
      "data": "<table><colgroup><!--test--></colgroup></table>",
      "errors": [
        "(1,7): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<table>"
        ],
        [
          3,
          "<colgroup>"
        ],
        [
          4,
          "<!-- test -->"
        ]
      ]
    },
    {
      "data": "<table><colgroup><html></colgroup></table>",
      "errors": [
        "(1,7): expected-doctype-but-got-start-tag",
        "(1,23): non-html-root"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<table>"
        ],
        [
          3,
          "<colgroup>"
        ]
      ]
    },
    {
      "data": "<table><colgroup> foo</colgroup></table>",
      "errors": [
        "(1,7): expected-doctype-but-got-start-tag",
        "(1,32): foster-parenting-character-in-table",
        "(1,32): foster-parenting-character-in-table",
        "(1,32): foster-parenting-character-in-table",
        "(1,32): unexpected-end-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "\"foo\""
        ],
        [
          2,
          "<table>"
        ],
        [
          3,
          "<colgroup>"
        ],
        [
          4,
          "\" \""
        ]
      ]
    },
    {
      "data": "<select><!--test--></select>",
      "errors": [
        "(1,8): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<select>"
        ],
        [
          3,
          "<!-- test -->"
        ]
      ]
    },
    {
      "data": "<select><html></select>",
      "errors": [
        "(1,8): expected-doctype-but-got-start-tag",
        "(1,14): non-html-root"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<select>"
        ]
      ]
    },
    {
      "data": "<frameset><html></frameset>",
      "errors": [
        "(1,10): expected-doctype-but-got-start-tag",
        "(1,16): non-html-root"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<frameset>"
        ]
      ]
    },
    {
      "data": "<frameset></frameset><html>",
      "errors": [
        "(1,10): expected-doctype-but-got-start-tag",
        "(1,27): non-html-root"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<frameset>"
        ]
      ]
    },
    {
      "data": "<frameset></frameset><!DOCTYPE html>",
      "errors": [
        "(1,10): expected-doctype-but-got-start-tag",
        "(1,36): unexpected-doctype"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<frameset>"
        ]
      ]
    },
    {
      "data": "<html><body></body></html><!DOCTYPE html>",
      "errors": [
        "(1,6): expected-doctype-but-got-start-tag",
        "(1,41): unexpected-doctype"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ]
      ]
    },
    {
      "data": "<svg><!DOCTYPE html></svg>",
      "errors": [
        "(1,5): expected-doctype-but-got-start-tag",
        "(1,20): unexpected-doctype"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<svg svg>"
        ]
      ]
    },
    {
      "data": "<svg><font></font></svg>",
      "errors": [
        "(1,5): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<svg svg>"
        ],
        [
          3,
          "<svg font>"
        ]
      ]
    },
    {
      "data": "<svg><font id=foo></font></svg>",
      "errors": [
        "(1,5): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<svg svg>"
        ],
        [
          3,
          "<svg font>"
        ],
        [
          4,
          "id=\"foo\""
        ]
      ]
    },
    {
      "data": "<svg><font size=4></font></svg>",
      "errors": [
        "(1,5): expected-doctype-but-got-start-tag",
        "(1,18): unexpected-html-element-in-foreign-content",
        "(1,31): unexpected-end-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<svg svg>"
        ],
        [
          2,
          "<font>"
        ],
        [
          3,
          "size=\"4\""
        ]
      ]
    },
    {
      "data": "<svg><font color=red></font></svg>",
      "errors": [
        "(1,5): expected-doctype-but-got-start-tag",
        "(1,21): unexpected-html-element-in-foreign-content",
        "(1,34): unexpected-end-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<svg svg>"
        ],
        [
          2,
          "<font>"
        ],
        [
          3,
          "color=\"red\""
        ]
      ]
    },
    {
      "data": "<svg><font font=sans></font></svg>",
      "errors": [
        "(1,5): expected-doctype-but-got-start-tag"
      ],
      "newErrors": [],
      "document": [
        [
          0,
          "<html>"
        ],
        [
          1,
          "<head>"
        ],
        [
          1,
          "<body>"
        ],
        [
          2,
          "<svg svg>"
        ],
        [
          3,
          "<svg font>"
        ],
        [
          4,
          "font=\"sans\""
        ]
      ]
    }
  ]
}
